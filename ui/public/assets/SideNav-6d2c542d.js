(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function V(){}function Z(n,e){for(const t in e)n[t]=e[t];return n}function Zt(n){return n()}function Ut(){return Object.create(null)}function at(n){n.forEach(Zt)}function Jt(n){return typeof n=="function"}function pt(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function oe(n){return Object.keys(n).length===0}function ce(n,e,t,i){if(n){const s=$t(n,e,t,i);return n[0](s)}}function $t(n,e,t,i){return n[1]&&i?Z(t.ctx.slice(),n[1](i(e))):t.ctx}function ae(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],c=Math.max(e.dirty.length,s.length);for(let o=0;o<c;o+=1)r[o]=e.dirty[o]|s[o];return r}return e.dirty|s}return e.dirty}function le(n,e,t,i,s,r){if(s){const c=$t(e,t,i,r);n.p(c,s)}}function ue(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function it(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function st(n){return n??""}function et(n,e){n.appendChild(e)}function gt(n,e,t){n.insertBefore(e,t||null)}function lt(n){n.parentNode&&n.parentNode.removeChild(n)}function gn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function U(n){return document.createElement(n)}function te(n){return document.createTextNode(n)}function zt(){return te(" ")}function bn(){return te("")}function he(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function A(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function fe(n){return Array.from(n.childNodes)}function xn(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function vn(n,e){n.value=e??""}function X(n,e,t,i){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}function kn(n,e){for(let t=0;t<n.options.length;t+=1){const i=n.options[t];if(i.__value===e){i.selected=!0;return}}n.selectedIndex=-1}function _n(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}let ct;function ot(n){ct=n}function de(){if(!ct)throw new Error("Function called outside component initialization");return ct}function ye(n){de().$$.on_mount.push(n)}function me(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const nt=[],Ot=[],ht=[],Ct=[],pe=Promise.resolve();let wt=!1;function ge(){wt||(wt=!0,pe.then(ee))}function Dt(n){ht.push(n)}function An(n){Ct.push(n)}const kt=new Set;let J=0;function ee(){if(J!==0)return;const n=ct;do{try{for(;J<nt.length;){const e=nt[J];J++,ot(e),be(e.$$)}}catch(e){throw nt.length=0,J=0,e}for(ot(null),nt.length=0,J=0;Ot.length;)Ot.pop()();for(let e=0;e<ht.length;e+=1){const t=ht[e];kt.has(t)||(kt.add(t),t())}ht.length=0}while(nt.length);for(;Ct.length;)Ct.pop()();wt=!1,kt.clear(),ot(n)}function be(n){if(n.fragment!==null){n.update(),at(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Dt)}}const ft=new Set;let q;function Tn(){q={r:0,c:[],p:q}}function Rn(){q.r||at(q.c),q=q.p}function bt(n,e){n&&n.i&&(ft.delete(n),n.i(e))}function Bt(n,e,t,i){if(n&&n.o){if(ft.has(n))return;ft.add(n),q.c.push(()=>{ft.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function Sn(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function ne(n){n&&n.c()}function Ft(n,e,t,i){const{fragment:s,after_update:r}=n.$$;s&&s.m(e,t),i||Dt(()=>{const c=n.$$.on_mount.map(Zt).filter(Jt);n.$$.on_destroy?n.$$.on_destroy.push(...c):at(c),n.$$.on_mount=[]}),r.forEach(Dt)}function It(n,e){const t=n.$$;t.fragment!==null&&(at(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xe(n,e){n.$$.dirty[0]===-1&&(nt.push(n),ge(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function xt(n,e,t,i,s,r,c,o=[-1]){const l=ct;ot(n);const a=n.$$={fragment:null,ctx:[],props:r,update:V,not_equal:s,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Ut(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};c&&c(a.root);let h=!1;if(a.ctx=t?t(n,e.props||{},(u,y,...f)=>{const p=f.length?f[0]:y;return a.ctx&&s(a.ctx[u],a.ctx[u]=p)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](p),h&&xe(n,u)),y}):[],a.update(),h=!0,at(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const u=fe(e.target);a.fragment&&a.fragment.l(u),u.forEach(lt)}else a.fragment&&a.fragment.c();e.intro&&bt(n.$$.fragment),Ft(n,e.target,e.anchor,e.customElement),ee()}ot(l)}class vt{$destroy(){It(this,1),this.$destroy=V}$on(e,t){if(!Jt(t))return V;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!oe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ve(n){let e,t,i,s;const r=n[6].default,c=ce(r,n,n[5],null);return{c(){e=U("div"),c&&c.c(),A(e,"class",t=st("hoverable "+n[1].class)+" svelte-euathk"),A(e,"style",i=n[0]+n[1].style)},m(o,l){gt(o,e,l),c&&c.m(e,null),s=!0},p(o,[l]){c&&c.p&&(!s||l&32)&&le(c,r,o,o[5],s?ae(r,o[5],l,null):ue(o[5]),null),(!s||l&2&&t!==(t=st("hoverable "+o[1].class)+" svelte-euathk"))&&A(e,"class",t),(!s||l&2&&i!==(i=o[0]+o[1].style))&&A(e,"style",i)},i(o){s||(bt(c,o),s=!0)},o(o){Bt(c,o),s=!1},d(o){o&&lt(e),c&&c.d(o)}}}function ke(n,e,t){let{$$slots:i={},$$scope:s}=e,{background:r="transparent"}=e,{borderRadius:c="inherit"}=e,{hovBackground:o="transparent"}=e,l=`
    --background: ${r};
    --border-radius: ${c};
    --hov-background: ${o};
    `;return n.$$set=a=>{t(1,e=Z(Z({},e),it(a))),"background"in a&&t(2,r=a.background),"borderRadius"in a&&t(3,c=a.borderRadius),"hovBackground"in a&&t(4,o=a.hovBackground),"$$scope"in a&&t(5,s=a.$$scope)},e=it(e),[l,e,r,c,o,s,i]}class _e extends vt{constructor(e){super(),xt(this,e,ke,ve,pt,{background:2,borderRadius:3,hovBackground:4})}}function Ae(n){let e,t,i,s,r;return{c(){e=U("button"),A(e,"class",t=st(n[1].class)+" svelte-18z7rew"),A(e,"style",i=n[1].style)},m(c,o){gt(c,e,o),e.innerHTML=n[0],s||(r=he(e,"click",n[4]),s=!0)},p(c,[o]){o&2&&t!==(t=st(c[1].class)+" svelte-18z7rew")&&A(e,"class",t),o&2&&i!==(i=c[1].style)&&A(e,"style",i)},i:V,o:V,d(c){c&&lt(e),s=!1,r()}}}function Te(n,e,t){let{name:i}=e,{stroke:s="white"}=e,c={chart:`<svg x="0px" y="0px" stroke="white" fill="white" stroke-width="5" viewBox="0 0 100 100" xml:space="preserve">
            <circle style="fill-opacity: 0; opacity: 1;" cx="50" cy="50" r="48" />
            <path fill="none" stroke="white" stroke-linecap="round" d="M 25, 75 L 42 40 L 58 60 L 75 25 "/>
        </svg>`,happy:`<svg width="100%" height="100%" stroke="${s}" stroke-width="3" fill-opacity="0" viewBox="0 0 50 50" xml:space="preserve">
            <circle cx="25" cy="25" r="22" />
            <circle cx="18" cy="20" r="3" />
            <circle cx="32" cy="20" r="3" />
            <path d="M 15,33 Q 25,40 35,33"/>
        </svg>`,menu:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${s}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
            <line x1="3" y1="4" x2="21" y2="4"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="20" x2="21" y2="20"></line>
        </svg>`,profile:`<svg x="0px" y="0px" stroke="${s}" fill="white" viewBox="0 0 54 54" xml:space="preserve">
            <circle style="stroke-width: 3; fill-opacity: 0; opacity: 1;" cx="26.5" cy="26.5" r="24" />
            <circle style="stroke-width: 3; fill-opacity: 0; opacity: 1;" cx="26.5" cy="20" r="10" />
            <path fill="none" stroke="white" stroke-width="3" d="M 8,42 Q 12,28 20,28 M 45,42 Q 41,28 33,28 "/>
        </svg>`,retry:`<svg width="100%" height="100%" stroke="${s}" stroke-width="3" fill-opacity="0" viewBox="0 0 50 50">
            <path d="M 42,32 A 20,20,0,1,1,42,18"/>
            <path fill="white" fill-opacity="1" d="M 44,22 L 34,17 L 45,12  Z"/>
        </svg>`,sad:`<svg width="100%" height="100%" stroke="${s}" stroke-width="3" fill-opacity="0" viewBox="0 0 50 50" xml:space="preserve">
            <circle cx="25" cy="25" r="22" />
            <circle cx="18" cy="20" r="3" />
            <circle cx="32" cy="20" r="3" />
            <path d="M 15,35 Q 25,28 35,35"/>
        </svg>`,settings:`<svg x="0px" y="0px" stroke="${s}" fill="white" viewBox="0 0 54 54" xml:space="preserve">
        <path d="M51.22,21h-5.052c-0.812,0-1.481-0.447-1.792-1.197s-0.153-1.54,0.42-2.114l3.572-3.571
            c0.525-0.525,0.814-1.224,0.814-1.966c0-0.743-0.289-1.441-0.814-1.967l-4.553-4.553c-1.05-1.05-2.881-1.052-3.933,0l-3.571,3.571
            c-0.574,0.573-1.366,0.733-2.114,0.421C33.447,9.313,33,8.644,33,7.832V2.78C33,1.247,31.753,0,30.22,0H23.78
            C22.247,0,21,1.247,21,2.78v5.052c0,0.812-0.447,1.481-1.197,1.792c-0.748,0.313-1.54,0.152-2.114-0.421l-3.571-3.571
            c-1.052-1.052-2.883-1.05-3.933,0l-4.553,4.553c-0.525,0.525-0.814,1.224-0.814,1.967c0,0.742,0.289,1.44,0.814,1.966l3.572,3.571
            c0.573,0.574,0.73,1.364,0.42,2.114S8.644,21,7.832,21H2.78C1.247,21,0,22.247,0,23.78v6.439C0,31.753,1.247,33,2.78,33h5.052
            c0.812,0,1.481,0.447,1.792,1.197s0.153,1.54-0.42,2.114l-3.572,3.571c-0.525,0.525-0.814,1.224-0.814,1.966
            c0,0.743,0.289,1.441,0.814,1.967l4.553,4.553c1.051,1.051,2.881,1.053,3.933,0l3.571-3.572c0.574-0.573,1.363-0.731,2.114-0.42
            c0.75,0.311,1.197,0.98,1.197,1.792v5.052c0,1.533,1.247,2.78,2.78,2.78h6.439c1.533,0,2.78-1.247,2.78-2.78v-5.052
            c0-0.812,0.447-1.481,1.197-1.792c0.751-0.312,1.54-0.153,2.114,0.42l3.571,3.572c1.052,1.052,2.883,1.05,3.933,0l4.553-4.553
            c0.525-0.525,0.814-1.224,0.814-1.967c0-0.742-0.289-1.44-0.814-1.966l-3.572-3.571c-0.573-0.574-0.73-1.364-0.42-2.114
            S45.356,33,46.168,33h5.052c1.533,0,2.78-1.247,2.78-2.78V23.78C54,22.247,52.753,21,51.22,21z M52,30.22
            C52,30.65,51.65,31,51.22,31h-5.052c-1.624,0-3.019,0.932-3.64,2.432c-0.622,1.5-0.295,3.146,0.854,4.294l3.572,3.571
            c0.305,0.305,0.305,0.8,0,1.104l-4.553,4.553c-0.304,0.304-0.799,0.306-1.104,0l-3.571-3.572c-1.149-1.149-2.794-1.474-4.294-0.854
            c-1.5,0.621-2.432,2.016-2.432,3.64v5.052C31,51.65,30.65,52,30.22,52H23.78C23.35,52,23,51.65,23,51.22v-5.052
            c0-1.624-0.932-3.019-2.432-3.64c-0.503-0.209-1.021-0.311-1.533-0.311c-1.014,0-1.997,0.4-2.761,1.164l-3.571,3.572
            c-0.306,0.306-0.801,0.304-1.104,0l-4.553-4.553c-0.305-0.305-0.305-0.8,0-1.104l3.572-3.571c1.148-1.148,1.476-2.794,0.854-4.294
            C10.851,31.932,9.456,31,7.832,31H2.78C2.35,31,2,30.65,2,30.22V23.78C2,23.35,2.35,23,2.78,23h5.052
            c1.624,0,3.019-0.932,3.64-2.432c0.622-1.5,0.295-3.146-0.854-4.294l-3.572-3.571c-0.305-0.305-0.305-0.8,0-1.104l4.553-4.553
            c0.304-0.305,0.799-0.305,1.104,0l3.571,3.571c1.147,1.147,2.792,1.476,4.294,0.854C22.068,10.851,23,9.456,23,7.832V2.78
            C23,2.35,23.35,2,23.78,2h6.439C30.65,2,31,2.35,31,2.78v5.052c0,1.624,0.932,3.019,2.432,3.64
            c1.502,0.622,3.146,0.294,4.294-0.854l3.571-3.571c0.306-0.305,0.801-0.305,1.104,0l4.553,4.553c0.305,0.305,0.305,0.8,0,1.104
            l-3.572,3.571c-1.148,1.148-1.476,2.794-0.854,4.294c0.621,1.5,2.016,2.432,3.64,2.432h5.052C51.65,23,52,23.35,52,23.78V30.22z"/>
            <path d="M27,18c-4.963,0-9,4.037-9,9s4.037,9,9,9s9-4.037,9-9S31.963,18,27,18z M27,34c-3.859,0-7-3.141-7-7s3.141-7,7-7s7,3.141,7,7S30.859,34,27,34z"/>
        </svg>`,x:`<svg width="24" height="24" viewBox="0 0 24 24" stroke="${s}">
            <path d="M 2 2 L 22 22 M 22 2 L 2 22" stroke-width="2" />
        </svg>`}[i];function o(l){me.call(this,n,l)}return n.$$set=l=>{t(1,e=Z(Z({},e),it(l))),"name"in l&&t(2,i=l.name),"stroke"in l&&t(3,s=l.stroke)},e=it(e),[c,e,i,s,o]}class Re extends vt{constructor(e){super(),xt(this,e,Te,Ae,pt,{name:2,stroke:3})}}const Se=[1,1,1,1],Mn=[.5,.5,.5,1],Me=[1,1,0,1],Ee=[0,1,0,1],Pe=[0,0,1,1],Le=[1,.5,0,1],Oe=[1,0,0,1],Ce=[0,0,0,1],jt=[Se,Ee,Me,Pe,Le,Oe];function Ht(n){return(n<0||n>=jt.length)&&console.error("Invalid face: "+n),jt[n]}function we(n){const e=n.layers,t=n.gl,i=n.perspectiveMatrix;let s=_t(e,1.01,.02),r=_t(e,1,0),c=_t(e,1.5,.02);const o=Array(_(e));for(let l=0;l<_(e);l++){let a={positionBuffer:t.createBuffer(),noGapPositionBuffer:t.createBuffer(),hintPositionBuffer:t.createBuffer(),indexBuffer:t.createBuffer(),cart2d:[],positions:null},h=new Float32Array(12),u=new Float32Array(12),y=new Float32Array(12);for(let m=0;m<12;m++){let x=l*12+m;h[m]=s[x],u[m]=r[x],y[m]=c[x]}t.bindBuffer(t.ARRAY_BUFFER,a.positionBuffer),t.bufferData(t.ARRAY_BUFFER,h,t.STATIC_DRAW),a.positions=h,t.bindBuffer(t.ARRAY_BUFFER,a.noGapPositionBuffer),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,a.hintPositionBuffer),t.bufferData(t.ARRAY_BUFFER,y,t.STATIC_DRAW);const f=Array(16);ut(f,0,i,[u[0],u[1],u[2],1]),ut(f,4,i,[u[3],u[4],u[5],1]),ut(f,8,i,[u[6],u[7],u[8],1]),ut(f,12,i,[u[9],u[10],u[11],1]),a.cart2d=[f[0]/f[3],f[1]/f[3],f[4]/f[7],f[5]/f[7],f[8]/f[11],f[9]/f[11],f[12]/f[15],f[13]/f[15]];const p=[0,1,2,0,2,3];t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(p),t.STATIC_DRAW),o[l]=a}return o}function ut(n,e,t,i){let s=i[0],r=i[1],c=i[2],o=i[3];n[e+0]=s*t[0]+r*t[4]+c*t[8]+o*t[12],n[e+1]=s*t[1]+r*t[5]+c*t[9]+o*t[13],n[e+2]=s*t[2]+r*t[6]+c*t[10]+o*t[14],n[e+3]=s*t[3]+r*t[7]+c*t[11]+o*t[15]}const ie=12,De=4,$=3;function _t(n,e,t){const i=d(n)*ie,s=Array(6*i);return Be(s,0*i,n,1,e,t),Fe(s,1*i,n,0,e,t),Ie(s,2*i,n,1,-e,t),Ke(s,3*i,n,0,-e,t),Ue(s,4*i,n,2,-e,t),ze(s,5*i,n,2,e,t),s}function Be(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=0;h<t;h++)for(let u=0;u<t;u++){const y=-1+1/t+u*2/t,f=-1+1/t+h*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=-b(t);l<=b(t);l++)for(let a=-b(t);a<=b(t);a++)c[o]=[2*a/t,2*l/t,s],o++;R(n,e,t,c,i,r)}function Fe(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=0;h<t;h++)for(let u=t-1;u>=0;u--){const y=-1+1/t+h*2/t,f=-1+1/t+u*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=-b(t);l<=b(t);l++)for(let a=b(t);a>=-b(t);a--)c[o]=[2*l/t,2*a/t,s],o++;R(n,e,t,c,i,r)}function Ie(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=0;h<t;h++)for(let u=t-1;u>=0;u--){const y=-1+1/t+u*2/t,f=-1+1/t+h*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=-b(t);l<=b(t);l++)for(let a=b(t);a>=-b(t);a--)c[o]=[2*a/t,2*l/t,s],o++;R(n,e,t,c,i,r)}function Ke(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=0;h<t;h++)for(let u=0;u<t;u++){const y=-1+1/t+h*2/t,f=-1+1/t+u*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=-b(t);l<=b(t);l++)for(let a=-b(t);a<=b(t);a++)c[o]=[2*l/t,2*a/t,s],o++;R(n,e,t,c,i,r)}function Ue(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=0;h<t;h++)for(let u=t-1;u>=0;u--){const y=-1+1/t+u*2/t,f=-1+1/t+h*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=-b(t);l<=b(t);l++)for(let a=b(t);a>=-b(t);a--)c[o]=[2*a/t,2*l/t,s],o++;R(n,e,t,c,i,r)}function ze(n,e,t,i,s,r){if(rt(t)){let l=Array(d(t)),a=0;for(let h=t-1;h>=0;h--)for(let u=t-1;u>=0;u--){const y=-1+1/t+u*2/t,f=-1+1/t+h*2/t;l[a]=[y,f,s],a++}R(n,e,t,l,i,r);return}let c=Array(d(t)),o=0;for(let l=b(t);l>=-b(t);l--)for(let a=b(t);a>=-b(t);a--)c[o]=[2*a/t,2*l/t,s],o++;R(n,e,t,c,i,r)}function R(n,e,t,i,s,r){for(let c=0;c<d(t);c++){const o=i[c];je(n,e+c*ie,t,o[0],o[1],o[2],s,r)}}function je(n,e,t,i,s,r,c,o){const l=1/t-o,a=[[i-l,s-l,r],[i+l,s-l,r],[i+l,s+l,r],[i-l,s+l,r]];for(let h=0;h<De;h++){const u=a[h];n[e+h*$]=u[(c+0)%$],n[e+h*$+1]=u[(c+1)%$],n[e+h*$+2]=u[(c+2)%$]}}function dt(n){return Math.floor(Math.random()*n)}function He(n){let e=n.length;for(;e!=0;){let t=dt(e);e--;let i=n[t];n[t]=n[e],n[e]=i}return n}const z=0,j=1,H=2,N=3,Y=4,Q=5,Ne=[[z,N,Y],[z,Q,N],[z,Y,j],[z,j,Q],[H,j,Y],[H,Q,j],[H,Y,N],[H,N,Q]],Ye=[[z,N],[z,Y],[z,Q],[z,j],[j,Y],[j,Q],[H,j],[H,Y],[H,Q],[H,N],[N,Y],[N,Q]];function Qe(n){let e=Nt(12,2),t=Nt(8,3),i=At(8),s=At(12);for(;Yt(i)!==Yt(s);)i=At(8);const r=Array(54);for(let v=0;v<6;v++){const P=n.center(v);r[P]=v}let c=n.corners(0,0),o=n.corners(1,0),l=n.corners(2,0),a=n.corners(3,0),h=n.corners(4,0),u=n.corners(5,0);const y=(v,P,W,L,O,C,w,D,B)=>{const k=(M,F)=>Ne[i[M]][(t[M]+F)%3];r[v.topLeft]=k(P,C),r[v.topRight]=k(W,w),r[v.bottomLeft]=k(L,D),r[v.bottomRight]=k(O,B)};y(c,0,1,2,3,0,0,0,0),y(o,2,3,4,5,2,1,1,2),y(l,4,5,6,7,0,0,0,0),y(a,6,7,0,1,2,1,1,2),y(h,0,2,6,4,2,1,1,2),y(u,3,1,5,7,2,1,1,2);let f=n.edges(0,0,0),p=n.edges(1,0,0),m=n.edges(2,0,0),x=n.edges(3,0,0),S=n.edges(4,0,0),G=n.edges(5,0,0);const T=(v,P,W,L,O,C,w,D,B)=>{const k=(M,F)=>Ye[s[M]][(e[M]+F)%2];r[v.top]=k(P,C),r[v.left]=k(W,w),r[v.right]=k(L,D),r[v.bottom]=k(O,B)};return T(f,0,1,2,3,0,0,0,0),T(p,3,4,5,6,1,0,0,1),T(m,6,7,8,9,0,0,0,0),T(x,9,10,11,0,1,0,0,1),T(S,1,10,4,7,1,1,1,1),T(G,2,5,11,8,1,1,1,1),r}function Nt(n,e){const t=Array(n);for(let i=0;i<n;i++)t[i]=dt(e);for(;!Ve(t,e);){const i=dt(n);t[i]=dt(e)}return t}function Ve(n,e){let t=0;for(let i=0;i<n.length;i++)t+=n[i];return t%e===0}function At(n){const e=Array(n);for(let t=0;t<n;t++)e[t]=t;return He(e),e}function Yt(n){const e=[...n];let t=!1;for(;;)if(e[0]===0){const i=e.findIndex((s,r)=>s!==r);if(i===-1)return t;e[0]=e[i],e[i]=0,t=!t}else{const i=e[0];e[0]=e[i],e[i]=i,t=!t}}let K;function Tt(n,e){const t=[e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3],e[0],e[1],e[2],e[3]];K.bindBuffer(K.ARRAY_BUFFER,n.buffer),K.bufferData(K.ARRAY_BUFFER,new Float32Array(t),K.STATIC_DRAW)}function d(n){return n*n}function b(n){return Math.floor(n/2)}function rt(n){return n%2==0}function _(n){return n*n*6}class Ge{stickers;underStickers;layers;affectedStickers;disableTurn;clockwise;animationQueue;gl;perspectiveMatrix;buffers;constructor(e,t){K=e,this.animationQueue=[],this.gl=e,this.perspectiveMatrix=t}setColors(e){for(let t=0;t<_(this.layers);t++)Tt(this.stickers[t],e[t])}solve(){const e=Array(_(this.layers));for(let t=0;t<_(this.layers);t++){const i=this.stickerToFace(t);this.stickers[t].face=i,e[t]=Ht(i)}this.setColors(e)}scramble(){if(this.layers===3){this.scramble3x3();return}this.naiveScramble()}scramble3x3(){const e=Qe(this);this.setCubeState(e)}naiveScramble(){let e=d(this.layers)*10;for(let t=0;t<e;t++){let i=Math.floor(Math.random()*3),s=Math.floor(Math.random()*this.layers),r=Math.floor(Math.random()*1)==0;this.matchTurn(i,s,r)}}setNumOfLayers(e){this.layers=e,this.stickers=Array(_(e)),this.underStickers=Array(_(e));for(let t=0;t<_(e);t++){const i=this.stickerToFace(t);this.stickers[t]={face:i,buffer:K.createBuffer()},this.underStickers[t]={face:i,buffer:K.createBuffer()},Tt(this.underStickers[t],Ce)}this.affectedStickers=Array(_(e)).fill(!1),this.buffers=we(this),this.solve()}getCubeState(){return this.stickers.map(e=>e.face)}setCubeState(e){for(let t=0;t<_(this.layers);t++){const i=Ht(e[t]);this.stickers[t].face=e[t],Tt(this.stickers[t],i)}}resetAffectedStickers(){const e=Array(_(this.layers));this.affectedStickers=e.fill(this.layers===1)}pushAnimation(e,t,i){let s=t?-1:1,r=[0,0,0];r[e]=s,this.animationQueue.push({axis:r,stickers:i,stickersToAnimate:this.affectedStickers})}turn(e,t,i){this.resetAffectedStickers(),this.pushAnimation(e,i,[...this.stickers]),this.matchTurn(e,t,i)}sliceTurn(e,t){const i=Array(_(this.layers));this.affectedStickers=i.fill(!1),this.pushAnimation(e,t,[...this.stickers]);for(let s=1;s<this.layers-1;s++)this.matchTurn(e,s,t)}wideTurn(e,t,i){this.resetAffectedStickers(),this.pushAnimation(e,i,[...this.stickers]),this.matchTurn(e,t,i);for(let s=1;s<this.layers-1;s++)this.matchTurn(e,s,i)}cubeRotate(e,t){this.resetAffectedStickers(),this.pushAnimation(e,t,[...this.stickers]);for(let i=0;i<this.layers;i++)this.matchTurn(e,i,t)}matchTurn(e,t,i){e==0?(this.turnXAxis(t,i),t==0?this.turnOuter(5,i):t==this.layers-1&&this.turnOuter(4,!i)):e==1?(this.turnYAxis(t,i),t==0?this.turnOuter(0,i):t==this.layers-1&&this.turnOuter(2,!i)):e==2?(this.turnZAxis(t,i),t==0?this.turnOuter(1,i):t==this.layers-1&&this.turnOuter(3,!i)):console.error(`Axis ${e} not recognized`)}turnXAxis(e,t){for(let i=1;i<=this.layers;i++)this.cycle(t,0*d(this.layers)+d(this.layers)-i-e*this.layers,3*d(this.layers)+d(this.layers)-i-e*this.layers,2*d(this.layers)+d(this.layers)-i-e*this.layers,1*d(this.layers)+d(this.layers)-i-e*this.layers)}turnYAxis(e,t){for(let i=0;i<this.layers;i++)this.cycle(t,1*d(this.layers)+i*this.layers+e,4*d(this.layers)+i*this.layers+e,3*d(this.layers)+(this.layers-i-1)*this.layers+(this.layers-1)-e,5*d(this.layers)+i*this.layers+e)}turnZAxis(e,t){for(let i=0;i<this.layers;i++)this.cycle(t,0*d(this.layers)+(i+1)*this.layers-1-e,5*d(this.layers)+i+this.layers*e,2*d(this.layers)+(this.layers-i-1)*this.layers+e,4*d(this.layers)+d(this.layers)-(i+1)-e*this.layers)}turnOuter(e,t){if(this.layers%2!=0){let i=this.center(e);this.affectedStickers[i]=!0}for(let i=0;i<Math.floor(this.layers/2);i++){const{topLeft:s,topRight:r,bottomLeft:c,bottomRight:o}=this.corners(e,i);this.cycle(t,s,r,o,c);let l=this.layers-2*(i+1);for(let a=0;a<l;a++){const{top:h,left:u,bottom:y,right:f}=this.edges(e,i,a);this.cycle(t,h,f,y,u)}}}cycle(e,t,i,s,r){this.affectedStickers[t]=!0,this.affectedStickers[i]=!0,this.affectedStickers[s]=!0,this.affectedStickers[r]=!0,e?this.cycleHelper(t,i,s,r):this.cycleHelper(r,s,i,t)}cycleHelper(e,t,i,s){let r=this.stickers[s];this.stickers[s]=this.stickers[i],this.stickers[i]=this.stickers[t],this.stickers[t]=this.stickers[e],this.stickers[e]=r}matchKeyToTurn(e){if(!this.disableTurn&&!e.ctrlKey)return this.matchKeyCodeToTurn(e.code)}matchKeyCodeToTurn(e){switch(e){case"KeyN":return this.cubeRotate(0,!0),{notation:"x",rotate:!0};case"KeyB":return this.cubeRotate(0,!1),{notation:"x'",rotate:!0};case"Semicolon":return this.cubeRotate(1,!0),{notation:"y",rotate:!0};case"KeyA":return this.cubeRotate(1,!1),{notation:"y'",rotate:!0};case"KeyP":return this.cubeRotate(2,!0),{notation:"z",rotate:!0};case"KeyQ":return this.cubeRotate(2,!1),{notation:"z'",rotate:!0};case"KeyJ":return this.turn(1,0,!0),{notation:"U",turn:!0};case"KeyF":return this.turn(1,0,!1),{notation:"U'",turn:!0};case"KeyS":return this.turn(1,this.layers-1,!1),{notation:"D",turn:!0};case"KeyL":return this.turn(1,this.layers-1,!0),{notation:"D'",turn:!0};case"KeyH":return this.turn(2,0,!0),{notation:"F",turn:!0};case"KeyG":return this.turn(2,0,!1),{notation:"F'",turn:!0};case"KeyW":return this.turn(2,this.layers-1,!1),{notation:"B",turn:!0};case"KeyO":return this.turn(2,this.layers-1,!0),{notation:"B'",turn:!0};case"KeyD":return this.turn(0,this.layers-1,!1),{notation:"L",turn:!0};case"KeyE":return this.turn(0,this.layers-1,!0),{notation:"L'",turn:!0};case"KeyI":return this.turn(0,0,!0),{notation:"R",turn:!0};case"KeyK":return this.turn(0,0,!1),{notation:"R'",turn:!0};case"BracketLeft":return this.sliceTurn(0,!1),{notation:"M",turn:!0};case"Quote":return this.sliceTurn(0,!0),{notation:"M'",turn:!0};case"KeyC":return this.sliceTurn(1,!1),{notation:"E",turn:!0};case"Comma":return this.sliceTurn(1,!0),{notation:"E'",turn:!0};case"KeyY":return this.sliceTurn(2,!0),{notation:"S",turn:!0};case"KeyT":return this.sliceTurn(2,!1),{notation:"S'",turn:!0};case"KeyU":return this.wideTurn(0,0,!0),{notation:"r",turn:!0};case"KeyM":return this.wideTurn(0,0,!1),{notation:"r'",turn:!0};case"KeyV":return this.wideTurn(0,this.layers-1,!1),{notation:"l",turn:!0};case"KeyR":return this.wideTurn(0,this.layers-1,!0),{notation:"l'",turn:!0}}}performMove(e,t){switch(e){case"x":this.cubeRotate(0,t);break;case"x'":this.cubeRotate(0,!t);break;case"x2":case"x2'":this.cubeRotate(0,t),this.cubeRotate(0,t);break;case"y":this.cubeRotate(1,t);break;case"y'":this.cubeRotate(1,!t);break;case"y2":case"y2'":this.cubeRotate(1,t),this.cubeRotate(1,t);break;case"z":this.cubeRotate(2,t);break;case"z'":this.cubeRotate(2,!t);break;case"z2":case"z2'":this.cubeRotate(2,t),this.cubeRotate(2,t);break;case"U":this.turn(1,0,t);break;case"U'":this.turn(1,0,!t);break;case"U2":case"U2'":this.turn(1,0,t),this.turn(1,0,t);break;case"u":this.wideTurn(1,0,t);break;case"u'":this.wideTurn(1,0,!t);break;case"u2":case"u2'":this.wideTurn(1,0,t),this.wideTurn(1,0,t);break;case"D":this.turn(1,this.layers-1,!t);break;case"D'":this.turn(1,this.layers-1,t);break;case"D2":case"D2'":this.turn(1,this.layers-1,t),this.turn(1,this.layers-1,t);break;case"d":this.wideTurn(1,this.layers-1,!t);break;case"d'":this.wideTurn(1,this.layers-1,t);break;case"d2":case"d2'":this.wideTurn(1,this.layers-1,t),this.wideTurn(1,this.layers-1,t);break;case"F":this.turn(2,0,t);break;case"F'":this.turn(2,0,!t);break;case"F2":case"F2'":this.turn(2,0,t),this.turn(2,0,t);break;case"f":this.wideTurn(2,0,t);break;case"f'":this.wideTurn(2,0,!t);break;case"f2":case"f2'":this.wideTurn(2,0,t),this.wideTurn(2,0,t);break;case"B":this.turn(2,this.layers-1,!t);break;case"B'":this.turn(2,this.layers-1,t);break;case"B2":case"B2'":this.turn(2,this.layers-1,t),this.turn(2,this.layers-1,t);break;case"b":this.wideTurn(2,this.layers-1,!t);break;case"b'":this.wideTurn(2,this.layers-1,t);break;case"b2":case"b2'":this.wideTurn(2,this.layers-1,t),this.wideTurn(2,this.layers-1,t);break;case"L":this.turn(0,this.layers-1,!t);break;case"L'":this.turn(0,this.layers-1,t);break;case"L2":case"L2'":this.turn(0,this.layers-1,t),this.turn(0,this.layers-1,t);break;case"l":this.wideTurn(0,this.layers-1,!t);break;case"l'":this.wideTurn(0,this.layers-1,t);break;case"l2":case"l2'":this.wideTurn(0,this.layers-1,t),this.wideTurn(0,this.layers-1,t);break;case"R":this.turn(0,0,t);break;case"R'":this.turn(0,0,!t);break;case"R2":case"R2'":this.turn(0,0,t),this.turn(0,0,t);break;case"r":this.wideTurn(0,0,t);break;case"r'":this.wideTurn(0,0,!t);break;case"r2":case"r2'":this.wideTurn(0,0,t),this.wideTurn(0,0,t);break;case"M":this.turn(0,1,!t);break;case"M'":this.turn(0,1,t);break;case"M2":case"M2'":this.sliceTurn(0,t),this.sliceTurn(0,t);break;case"E":this.sliceTurn(1,!t);break;case"E'":this.sliceTurn(1,t);break;case"E2":case"E2'":this.sliceTurn(1,t),this.sliceTurn(1,t);break;case"S":this.sliceTurn(2,t);break;case"S'":this.sliceTurn(2,!t);break;case"S2":case"S2'":this.sliceTurn(2,t);default:throw new Error("Invalid turn in algorithm: "+e)}}performAlg(e){if(!e)return;let t=e.split(" ");for(let i=0;i<t.length;i++)this.performMove(t[i],!0);this.animationQueue=[]}performAlgReverse(e){if(!e)return;let t=e.split(" ");for(let i=t.length-1;i>=0;i--)this.performMove(t[i],!1);this.animationQueue=[]}stickerIsOnFace(e,t){return t*d(this.layers)<=e&&e<(t+1)*d(this.layers)}stickerToFace(e){return Math.floor(e/d(this.layers))}center(e){return e*d(this.layers)+Math.floor(d(this.layers)/2)}corners(e,t){const i=e*d(this.layers);return{topLeft:i+(this.layers+1)*t,topRight:i+(this.layers-1)*(this.layers-t),bottomRight:i+(this.layers+1)*(this.layers-t-1),bottomLeft:i+(this.layers-1)*(t+1)}}edges(e,t,i){const s=this.corners(e,t);let r=this.layers-2*(t+1);return{top:s.topLeft+this.layers*(i+1),left:s.topLeft+(r-i),right:s.topRight+i+1,bottom:s.bottomLeft+this.layers*(r-i)}}}function Qt(n,e){return n/e*2-1}function Vt(n,e){return 1-n/e*2}function Rt(n,e,t,i){return n<t?(i-e)/(t-n):(e-i)/(n-t)}function tt(n,e,t,i,s,r){return Math.abs(.5*(n*(i-r)+t*(r-e)+s*(e-i)))}function We(n,e){return n.layers-1-e%n.layers}function St(n,e){return n.layers-1-Math.floor(e/n.layers)}function Xe(n,e){return e%n.layers}function Mt(n,e){return n.layers-1-Math.floor((e-d(n.layers))/n.layers)}class qe{numOfPointerMoves;xOnDown;yOnDown;xOnMove;yOnMove;stickerOnDown;cart2dOnDown;onPointerDown(e,t,i,s){const r=s.buffers;this.numOfPointerMoves=0;const c=Qt(e,i.clientWidth),o=Vt(t,i.clientHeight);this.xOnDown=c,this.yOnDown=o,[this.stickerOnDown,this.cart2dOnDown]=this._coordinatesToSticker(c,o,s,r);function l(m,x,S){return{x:r[m].cart2d[x],y:r[m].cart2d[S]}}if(this.stickerOnDown!==-1)return;const a=l(0,0,1),h=l(s.layers*(s.layers-1),6,7),u=l(s.layers-1,2,3),y=l(d(s.layers)-1,4,5),f=l(s.layers*(s.layers+1)-1,0,1),p=l(d(s.layers)*2-1,2,3);o>a.y&&c>a.x&&c<h.x?s.cubeRotate(0,!0):c<a.x&&o>u.y&&o<a.y?s.cubeRotate(2,!1):c>h.x&&o>y.y&&o<h.y?s.cubeRotate(2,!0):c<f.x&&o>f.y&&o<u.y?s.cubeRotate(1,!0):c>p.x&&o>p.y&&o<y.y?s.cubeRotate(1,!1):o<f.y&&c>f.x&&c<p.x&&s.cubeRotate(0,!1)}onPointerMove(e,t){this.numOfPointerMoves++,this.xOnMove=e,this.yOnMove=t}onPointerUp(e,t){if(this.numOfPointerMoves<2)return;let i,s;if(this.stickerOnDown!==-1&&(i=Rt(this.cart2dOnDown[0],this.cart2dOnDown[1],this.cart2dOnDown[4],this.cart2dOnDown[5]),s=Rt(this.cart2dOnDown[2],this.cart2dOnDown[3],this.cart2dOnDown[6],this.cart2dOnDown[7]),i<0)){const l=i;i=s,s=l}const r=Qt(this.xOnMove,e.clientWidth),c=Vt(this.yOnMove,e.clientHeight),o=Rt(r,c,this.xOnDown,this.yOnDown);t.stickerIsOnFace(this.stickerOnDown,0)?r===this.xOnDown?t.turn(0,St(t,this.stickerOnDown),c>this.yOnDown):o>i?t.turn(0,St(t,this.stickerOnDown),r>this.xOnDown):o<s?t.turn(0,St(t,this.stickerOnDown),r<this.xOnDown):t.turn(2,We(t,this.stickerOnDown),r>this.xOnDown):t.stickerIsOnFace(this.stickerOnDown,1)&&(r===this.xOnDown?t.turn(0,Mt(t,this.stickerOnDown),c>this.yOnDown):o>i?t.turn(0,Mt(t,this.stickerOnDown),r>this.xOnDown):o<s?t.turn(0,Mt(t,this.stickerOnDown),r<this.xOnDown):t.turn(1,Xe(t,this.stickerOnDown),r<this.xOnDown))}_coordinatesToSticker(e,t,i,s){const r=c=>{if(!s[c].cart2d){console.error("cart2d is undefined");return}const o=s[c].cart2d,l=tt(o[0],o[1],o[2],o[3],o[4],o[5])+tt(o[0],o[1],o[4],o[5],o[6],o[7]),a=tt(e,t,o[0],o[1],o[2],o[3])+tt(e,t,o[2],o[3],o[4],o[5])+tt(e,t,o[4],o[5],o[6],o[7])+tt(e,t,o[6],o[7],o[0],o[1]),h=1e-5;if(Math.abs(l-a)<h)return[c,o]};for(let c=0;c<2*d(i.layers);c++){const o=r(c);if(o)return o}return[-1,void 0]}}function yt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ze(n,e,t,i,s){const r=1/Math.tan(e/2);if(n[0]=r/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,s!=null&&s!==1/0){const c=1/(i-s);n[10]=(s+i)*c,n[14]=2*s*i*c}else n[10]=-1,n[14]=-2*i;return n}function mt(n,e,t,i){let s=i[0],r=i[1],c=i[2],o=1/Math.hypot(s,r,c);s*=o,r*=o,c*=o;let l=Math.sin(t),a=Math.cos(t),h=1-a,u=e[0],y=e[1],f=e[2],p=e[3],m=e[4],x=e[5],S=e[6],G=e[7],T=e[8],v=e[9],P=e[10],W=e[11],L=s*s*h+a,O=r*s*h+c*l,C=c*s*h-r*l,w=s*r*h-c*l,D=r*r*h+a,B=c*r*h+s*l,k=s*c*h+r*l,M=r*c*h-s*l,F=c*c*h+a;return n[0]=u*L+m*O+T*C,n[1]=y*L+x*O+v*C,n[2]=f*L+S*O+P*C,n[3]=p*L+G*O+W*C,n[4]=u*w+m*D+T*B,n[5]=y*w+x*D+v*B,n[6]=f*w+S*D+P*B,n[7]=p*w+G*D+W*B,n[8]=u*k+m*M+T*F,n[9]=y*k+x*M+v*F,n[10]=f*k+S*M+P*F,n[11]=p*k+G*M+W*F,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Je(n,e){let t=e[0],i=e[1],s=e[2];return n[12]+=n[0]*t+n[4]*i+n[7]*s,n[13]+=n[1]*t+n[5]*i+n[8]*s,n[14]+=n[2]*t+n[5]*i+n[9]*s,n[15]+=n[3]*t+n[6]*i+n[10]*s,n}function Gt(){let n;return e=>(n||(n=e()),n)}const $e=100,tn=15;class en{position;_velocity;_acceleration;target;constructor(){this.position=0,this._velocity=200,this._acceleration=0,this.target=0}update(e){const t=-$e*(this.position-this.target),i=-tn*this._velocity;this._acceleration=t+i,this._velocity+=this._acceleration*e,this.position+=this._velocity*e}}let E=nn(),g=sn(E),I=rn(g);function nn(){const n=document.createElement("canvas");return n.style.position="fixed",n.style.display="block",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.zIndex="-1",document.body.appendChild(n),document.addEventListener("keydown",e=>{Kt.forEach(t=>{t.keysEnabled&&t.cube.matchKeyToTurn(e)})}),n}function sn(n){return n.getContext("webgl")}function rn(n){const i=ln(n,`
    attribute vec4 aVertexPosition;
    attribute vec4 aVertexColor;
    uniform mat4 uTransformMatrix;
    uniform mat4 uRotateMatrix;

    // variables shared between vertex and fragment shaders
    varying lowp vec4 vColor;
    varying lowp vec4 originalPos;
    varying lowp vec4 rotatedPos;
    void main(void) {
        gl_Position = uTransformMatrix * aVertexPosition;
        originalPos = aVertexPosition;
        rotatedPos = uRotateMatrix * aVertexPosition;
        vColor = aVertexColor;
    }
    `,`
    // variables shared between vertex and fragment shaders
    varying lowp vec4 vColor;
    varying lowp vec4 originalPos;
    varying lowp vec4 rotatedPos;

    void main(void) {
        gl_FragColor = vColor;

        // low precision float variable
        lowp float max = 1.05;

        // if it is a normal sticker rather than a hint sticker, it should not be discarded
        if (originalPos.x < max && originalPos.x > -max && originalPos.y < max && originalPos.y > -max && originalPos.z < max && originalPos.z > -max) {
            return;
        }

        // if it starts on the right or left, and stays on its side, it should not be discarded
        if (originalPos.x > max && rotatedPos.x > max) return;
        if (originalPos.x < -max && rotatedPos.x < -max) return;

        if (rotatedPos.y < max && rotatedPos.z < max) return;
        discard;
    }
    `);return n.useProgram(i),{attribLocations:{vertexPosition:n.getAttribLocation(i,"aVertexPosition"),vertexColor:n.getAttribLocation(i,"aVertexColor")},uniformLocations:{transformMatrix:n.getUniformLocation(i,"uTransformMatrix"),rotateMatrix:n.getUniformLocation(i,"uRotateMatrix")}}}let Kt=[],se=[],Wt=Date.now()*.001,Xt=!1;function on(){Xt||(Xt=!0,requestAnimationFrame(re))}function cn(n,e=3){let t=an(n),i=new Ge(g,t);i.setNumOfLayers(e);let s=new en,r=new qe,c={cube:i,dragEnabled:!0,keysEnabled:!0},o={cube:i,div:n,spring:s};const l=(p,m)=>{c.dragEnabled&&r.onPointerDown(p,m,n,c.cube)},a=(p,m)=>{c.dragEnabled&&r.onPointerMove(p,m)},h=()=>{c.dragEnabled&&r.onPointerUp(n,c.cube)},u=p=>{const m=p.target.getBoundingClientRect(),x=p.touches[0].pageX-m.left,S=p.touches[0].pageY-m.top;return{x,y:S}},y=()=>{n.addEventListener("pointerdown",p=>l(p.offsetX,p.offsetY)),n.addEventListener("pointermove",p=>a(p.offsetX,p.offsetY)),n.addEventListener("pointerup",()=>h())},f=()=>{n.addEventListener("touchstart",p=>{const{x:m,y:x}=u(p);l(m,x)}),n.addEventListener("touchmove",p=>{const{x:m,y:x}=u(p);a(m,x)}),n.addEventListener("touchend",()=>{h()})};return window.PointerEvent?y():f(),Kt.push(c),se.push(o),on(),c}function an(n){let e=yt();return Ze(e,50*Math.PI/180,n.clientWidth/n.clientHeight,.1,100),Je(e,[0,0,-5]),mt(e,e,45*Math.PI/180,[1,0,0]),mt(e,e,0,[0,-1,0]),e}function Et(n,e,t){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(e.attribLocations.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.attribLocations.vertexPosition)}function Pt(n,e,t){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(e.attribLocations.vertexColor,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(e.attribLocations.vertexColor)}function Lt(n){n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}function ln(n,e,t){const i=qt(n,n.VERTEX_SHADER,e),s=qt(n,n.FRAGMENT_SHADER,t),r=n.createProgram();return n.attachShader(r,i),n.attachShader(r,s),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)?r:(alert("Unable to initialize the shader program: "+n.getProgramInfoLog(r)),null)}function qt(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+n.getShaderInfoLog(i)),n.deleteShader(i),null)}function un(){const n=E.clientWidth,e=E.clientHeight,t=E.width!==n||E.height!==e;return t&&(E.width=n,E.height=e),t}function re(n){n*=.001;const e=n-Wt;Wt=n,un(),g.enable(g.DEPTH_TEST),g.enable(g.SCISSOR_TEST),g.depthFunc(g.LEQUAL),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);for(let t=0;t<Kt.length;t++){const{cube:i,div:s,spring:r}=se[t],c=s.getBoundingClientRect();if(c.bottom<0||c.top>E.clientHeight||c.right<0||c.left>E.clientWidth)continue;const o=c.right-c.left,l=c.bottom-c.top,a=c.left,h=E.clientHeight-c.bottom;g.viewport(a,h,o,l),g.scissor(a,h,o,l),i.animationQueue[0]&&(r.target=i.animationQueue.length*90,r.update(e),r.position>=90&&(i.affectedStickers=Array(_(i.layers)).fill(!1),r.position=0,i.animationQueue.shift()));const u=i.animationQueue[0];let y=hn(i),f=Gt(),p=Gt();for(let m=0;m<_(i.layers);m++){let x=i.buffers[m];const S=u&&u.stickersToAnimate[m]?f(()=>mt(yt(),i.perspectiveMatrix,r.position*Math.PI/180,u.axis)):i.perspectiveMatrix;g.uniformMatrix4fv(I.uniformLocations.transformMatrix,!1,S);const G=u&&u.stickersToAnimate[m]?p(()=>{const T=yt();return mt(T,T,r.position*Math.PI/180,u.axis)}):yt();g.uniformMatrix4fv(I.uniformLocations.rotateMatrix,!1,G),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,x.indexBuffer),Et(x.positionBuffer,I,g),Pt(y[m].buffer,I,g),Lt(g),Et(x.noGapPositionBuffer,I,g),Pt(i.underStickers[m].buffer,I,g),Lt(g),Et(x.hintPositionBuffer,I,g),Pt(y[m].buffer,I,g),Lt(g)}}requestAnimationFrame(re)}function hn(n){return n.animationQueue[0]?n.animationQueue[0].stickers:n.stickers}function fn(n){let e,t,i;return{c(){e=U("div"),t=U("div"),A(t,"class","gl-div svelte-xxjnyc"),A(e,"class",i=st(n[1].class)+" svelte-xxjnyc")},m(s,r){gt(s,e,r),et(e,t),n[3](t)},p(s,[r]){r&2&&i!==(i=st(s[1].class)+" svelte-xxjnyc")&&A(e,"class",i)},i:V,o:V,d(s){s&&lt(e),n[3](null)}}}function dn(n,e,t){let{onSceneInitialized:i}=e,s,r;ye(()=>{r=cn(s),i(r)});function c(o){Ot[o?"unshift":"push"](()=>{s=o,t(0,s)})}return n.$$set=o=>{t(1,e=Z(Z({},e),it(o))),"onSceneInitialized"in o&&t(2,i=o.onSceneInitialized)},e=it(e),[s,e,i,c]}class En extends vt{constructor(e){super(),xt(this,e,dn,fn,pt,{onSceneInitialized:2})}}function yn(n){let e,t;return e=new Re({props:{name:"x",style:"padding: 4px;"}}),e.$on("click",n[2]),{c(){ne(e.$$.fragment)},m(i,s){Ft(e,i,s),t=!0},p:V,i(i){t||(bt(e.$$.fragment,i),t=!0)},o(i){Bt(e.$$.fragment,i),t=!1},d(i){It(e,i)}}}function mn(n){let e,t,i,s,r,c,o,l;return r=new _e({props:{hovBackground:"var(--gray-500)",borderRadius:"4px",$$slots:{default:[yn]},$$scope:{ctx:n}}}),{c(){e=U("div"),t=U("div"),i=U("h5"),i.textContent="Menu",s=zt(),ne(r.$$.fragment),c=zt(),o=U("div"),o.innerHTML=`<div style="height: 8px;"></div> 
        <a href="learn.html"><button style="width: 100%;">Learn</button></a> 
        <div style="height: 8px;"></div> 
        <a href="play.html"><button style="width: 100%;">Play</button></a> 
        <div style="height: 8px;"></div> 
        <a href="train.html"><button style="width: 100%;">Train</button></a> 
        <div style="height: 8px;"></div> 
        <a href="cuble.html"><button style="width: 100%;">Cuble</button></a>`,X(i,"color","white"),X(i,"font-size","1.2rem"),A(t,"class","row"),X(t,"justify-content","space-between"),X(t,"padding","8px"),X(o,"display","flex"),X(o,"flex-direction","column"),X(o,"padding","0 8px"),A(e,"style",n[1])},m(a,h){gt(a,e,h),et(e,t),et(t,i),et(t,s),Ft(r,t,null),et(e,c),et(e,o),l=!0},p(a,[h]){const u={};h&9&&(u.$$scope={dirty:h,ctx:a}),r.$set(u),(!l||h&2)&&A(e,"style",a[1])},i(a){l||(bt(r.$$.fragment,a),l=!0)},o(a){Bt(r.$$.fragment,a),l=!1},d(a){a&&lt(e),It(r)}}}function pn(n,e,t){let i,{open:s}=e;const r=()=>t(0,s=!1);return n.$$set=c=>{"open"in c&&t(0,s=c.open)},n.$$.update=()=>{n.$$.dirty&1&&t(1,i=`position: fixed; top: 0; left: 0; width: 300px; height: 100%; background-color: var(--gray-700); z-index: 10; ${s?"transform: translateX(0); transition: transform 0.3s ease-in-out":"transform: translateX(-100%); transition: transform 0.3s ease-in-out"}`)},[s,i,r]}class Pn extends vt{constructor(e){super(),xt(this,e,pn,mn,pt,{open:0})}}export{V as A,vn as B,Z as C,it as D,Tt as E,Mn as F,En as G,_e as H,Re as I,Rn as J,Tn as K,_n as L,bn as M,Dt as N,kn as O,gn as P,vt as S,Pn as a,Ot as b,Sn as c,ne as d,U as e,zt as f,A as g,X as h,xt as i,gt as j,et as k,he as l,Ft as m,xn as n,An as o,bt as p,Bt as q,lt as r,pt as s,te as t,It as u,at as v,ce as w,le as x,ue as y,ae as z};
