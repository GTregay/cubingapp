(()=>{var ot=[1,1,1,1],Ee=[.5,.5,.5,1],st=[1,1,0,1],it=[0,1,0,1],at=[0,0,1,1],lt=[1,.5,0,1],ct=[1,0,0,1],Oe=[0,0,0,1],Be=[ot,it,st,at,lt,ct];function Q(r){return(r<0||r>=Be.length)&&console.error("Invalid face: "+r),Be[r]}function Ce(r,t,e){let n=he(t,1.01,.02),o=he(t,1,0),a=he(t,1.5,.02),l=Array(t.numOfStickers);for(let s=0;s<t.numOfStickers;s++){let i={positionBuffer:r.createBuffer(),noGapPositionBuffer:r.createBuffer(),hintPositionBuffer:r.createBuffer(),indexBuffer:r.createBuffer(),cart2d:[],positions:null},c=new Float32Array(12),h=new Float32Array(12),m=new Float32Array(12);for(let u=0;u<12;u++){let f=s*12+u;c[u]=n[f],h[u]=o[f],m[u]=a[f]}if(r.bindBuffer(r.ARRAY_BUFFER,i.positionBuffer),r.bufferData(r.ARRAY_BUFFER,c,r.STATIC_DRAW),i.positions=c,r.bindBuffer(r.ARRAY_BUFFER,i.noGapPositionBuffer),r.bufferData(r.ARRAY_BUFFER,h,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,i.hintPositionBuffer),r.bufferData(r.ARRAY_BUFFER,m,r.STATIC_DRAW),e){let u=Array(16);re(u,0,e,[h[0],h[1],h[2],1]),re(u,4,e,[h[3],h[4],h[5],1]),re(u,8,e,[h[6],h[7],h[8],1]),re(u,12,e,[h[9],h[10],h[11],1]),i.cart2d=[u[0]/u[3],u[1]/u[3],u[4]/u[7],u[5]/u[7],u[8]/u[11],u[9]/u[11],u[12]/u[15],u[13]/u[15]]}let y=[0,1,2,0,2,3];r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(y),r.STATIC_DRAW),l[s]=i}return l}function re(r,t,e,n){let o=Array(4),a=n[0],l=n[1],s=n[2],i=n[3];r[t+0]=a*e[0]+l*e[4]+s*e[8]+i*e[12],r[t+1]=a*e[1]+l*e[5]+s*e[9]+i*e[13],r[t+2]=a*e[2]+l*e[6]+s*e[10]+i*e[14],r[t+3]=a*e[3]+l*e[7]+s*e[11]+i*e[15]}var Ie=12,ht=4,N=3;function he(r,t,e){let n=r.layersSq*Ie,o=Array(6*n);return ut(o,0*n,r,1,t,e),mt(o,1*n,r,0,t,e),ft(o,2*n,r,1,-t,e),yt(o,3*n,r,0,-t,e),dt(o,4*n,r,2,-t,e),pt(o,5*n,r,2,t,e),o}function ut(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=0;h<e.layers;h++)for(let m=0;m<e.layers;m++){let y=-1+1/e.layers+m*2/e.layers,u=-1+1/e.layers+h*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=-e.layersHalf;i<=e.layersHalf;i++)for(let c=-e.layersHalf;c<=e.layersHalf;c++)l[s]=[2*c/e.layers,2*i/e.layers,o],s++;v(r,t,e,l,n,a)}function mt(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=0;h<e.layers;h++)for(let m=e.layers-1;m>=0;m--){let y=-1+1/e.layers+h*2/e.layers,u=-1+1/e.layers+m*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=-e.layersHalf;i<=e.layersHalf;i++)for(let c=e.layersHalf;c>=-e.layersHalf;c--)l[s]=[2*i/e.layers,2*c/e.layers,o],s++;v(r,t,e,l,n,a)}function ft(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=0;h<e.layers;h++)for(let m=e.layers-1;m>=0;m--){let y=-1+1/e.layers+m*2/e.layers,u=-1+1/e.layers+h*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=-e.layersHalf;i<=e.layersHalf;i++)for(let c=e.layersHalf;c>=-e.layersHalf;c--)l[s]=[2*c/e.layers,2*i/e.layers,o],s++;v(r,t,e,l,n,a)}function yt(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=0;h<e.layers;h++)for(let m=0;m<e.layers;m++){let y=-1+1/e.layers+h*2/e.layers,u=-1+1/e.layers+m*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=-e.layersHalf;i<=e.layersHalf;i++)for(let c=-e.layersHalf;c<=e.layersHalf;c++)l[s]=[2*i/e.layers,2*c/e.layers,o],s++;v(r,t,e,l,n,a)}function dt(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=0;h<e.layers;h++)for(let m=e.layers-1;m>=0;m--){let y=-1+1/e.layers+m*2/e.layers,u=-1+1/e.layers+h*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=-e.layersHalf;i<=e.layersHalf;i++)for(let c=e.layersHalf;c>=-e.layersHalf;c--)l[s]=[2*c/e.layers,2*i/e.layers,o],s++;v(r,t,e,l,n,a)}function pt(r,t,e,n,o,a){if(e.layersEven){let i=Array(e.layersSq),c=0;for(let h=e.layers-1;h>=0;h--)for(let m=e.layers-1;m>=0;m--){let y=-1+1/e.layers+m*2/e.layers,u=-1+1/e.layers+h*2/e.layers;i[c]=[y,u,o],c++}v(r,t,e,i,n,a);return}let l=Array(e.layersSq),s=0;for(let i=e.layersHalf;i>=-e.layersHalf;i--)for(let c=e.layersHalf;c>=-e.layersHalf;c--)l[s]=[2*c/e.layers,2*i/e.layers,o],s++;v(r,t,e,l,n,a)}function v(r,t,e,n,o,a){for(let l=0;l<e.layersSq;l++){let s=n[l];Rt(r,t+l*Ie,e,s[0],s[1],s[2],o,a)}}function Rt(r,t,e,n,o,a,l,s){let i=1/e.layers-s,c=[[n-i,o-i,a],[n+i,o-i,a],[n+i,o+i,a],[n-i,o+i,a]];for(let h=0;h<ht;h++){let m=c[h];r[t+h*N]=m[(l+0)%N],r[t+h*N+1]=m[(l+1)%N],r[t+h*N+2]=m[(l+2)%N]}}var ne=class{constructor(){this.position=0,this._velocity=200,this._acceleration=0,this.target=0}update(t){let e=-100*(this.position-this.target),n=-15*this._velocity;this._acceleration=e+n,this._velocity+=this._acceleration*t,this.position+=this._velocity*t}};function V(r,t){return Math.floor(r/t.layersSq)}function C(r){return Math.floor(Math.random()*r)}function De(r){let t=r.length;for(;t!=0;){let e=C(t);t--;let n=r[e];r[e]=r[t],r[t]=n}return r}var I=0,D=1,_=2,q=3,H=4,z=5,Ut=[[I,q,H],[I,z,q],[I,H,D],[I,D,z],[_,D,H],[_,z,D],[_,H,q],[_,q,z]],gt=[[I,q],[I,H],[I,z],[I,D],[D,H],[D,z],[_,D],[_,H],[_,z],[_,q],[q,H],[q,z]];function He(r){let t=_e(12,2),e=_e(8,3),n=ue(8),o=ue(12);for(;qe(n)!==qe(o);)n=ue(8);let a=Array(54);for(let R=0;R<6;R++){let S=r.center(R);a[S]=R}let l=r.corners(0,0),s=r.corners(1,0),i=r.corners(2,0),c=r.corners(3,0),h=r.corners(4,0),m=r.corners(5,0),y=(R,S,j,A,T,w,B,E,O)=>{let x=(M,P)=>Ut[n[M]][(e[M]+P)%3];a[R.topLeft]=x(S,w),a[R.topRight]=x(j,B),a[R.bottomLeft]=x(A,E),a[R.bottomRight]=x(T,O)};y(l,0,1,2,3,0,0,0,0),y(s,2,3,4,5,2,1,1,2),y(i,4,5,6,7,0,0,0,0),y(c,6,7,0,1,2,1,1,2),y(h,0,2,6,4,2,1,1,2),y(m,3,1,5,7,2,1,1,2);let u=r.edges(0,0,0),f=r.edges(1,0,0),p=r.edges(2,0,0),g=r.edges(3,0,0),U=r.edges(4,0,0),L=r.edges(5,0,0),b=(R,S,j,A,T,w,B,E,O)=>{let x=(M,P)=>gt[o[M]][(t[M]+P)%2];a[R.top]=x(S,w),a[R.left]=x(j,B),a[R.right]=x(A,E),a[R.bottom]=x(T,O)};return b(u,0,1,2,3,0,0,0,0),b(f,3,4,5,6,1,0,0,1),b(p,6,7,8,9,0,0,0,0),b(g,9,10,11,0,1,0,0,1),b(U,1,10,4,7,1,1,1,1),b(L,2,5,11,8,1,1,1,1),a}function _e(r,t){let e=Array(r);for(let n=0;n<r;n++)e[n]=C(t);for(;!xt(e,t);){let n=C(r);e[n]=C(t)}return e}function xt(r,t){let e=0;for(let n=0;n<r.length;n++)e+=r[n];return e%t===0}function ue(r){let t=Array(r);for(let e=0;e<r;e++)t[e]=e;return De(t),t}function qe(r){let t=[...r],e=!1;for(;;)if(t[0]===0){let n=t.findIndex((o,a)=>o!==a);if(n===-1)return e;t[0]=t[n],t[n]=0,e=!e}else{let n=t[0];t[0]=t[n],t[n]=n,e=!e}}var bt=document.querySelector("canvas"),G=bt.getContext("webgl");function me(r,t){let e=[t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3],t[0],t[1],t[2],t[3]];G.bindBuffer(G.ARRAY_BUFFER,r.buffer),G.bufferData(G.ARRAY_BUFFER,new Float32Array(e),G.STATIC_DRAW)}var oe=class{constructor(){this.animationQueue=[]}new(){this.axis=0,this.stickers=Array(this.numOfStickers),this.underStickers=Array(this.numOfStickers);for(let t=0;t<this.numOfStickers;t++){let e=V(t,this);this.stickers[t]={face:e,buffer:G.createBuffer()},this.underStickers[t]={face:e,buffer:G.createBuffer()},me(this.underStickers[t],Oe)}this.affectedStickers=Array(this.numOfStickers).fill(!1)}isSolved(){let t;for(let e=0;e<this.numOfStickers;e++){if(e%this.layersSq===0){t=this.stickers[e].face;continue}if(t!==this.stickers[e].face)return!1}return!0}setColors(t){for(let e=0;e<this.numOfStickers;e++)this.setColor(t[e],e)}setColor(t,e){me(this.stickers[e],t)}solve(){let t=Array(this.numOfStickers);for(let e=0;e<this.numOfStickers;e++)t[e]=Q(V(e,this));this.setColors(t)}scramble(){if(this.layers===3){this.scramble3x3();return}this.naiveScramble()}scramble3x3(){let t=He(this);this.setCubeState(t)}naiveScramble(){let t=this.layersSq*10;for(let e=0;e<t;e++){let n=Math.floor(Math.random()*3),o=Math.floor(Math.random()*this.layers),a=Math.floor(Math.random()*1)==0;this._matchTurn(n,o,a)}}setNumOfLayers(t){this.layers=t,this.layersSq=t*t,this.layersHalf=Math.floor(this.layers/2),this.layersEven=this.layers%2==0,this.numOfStickers=this.layersSq*6}getCubeState(){return this.stickers.map(t=>t.face)}setCubeState(t){for(let e=0;e<this.numOfStickers;e++){let n=Q(t[e]);this.stickers[e].face=t[e],me(this.stickers[e],n)}}resetAffectedStickers(){this.affectedStickers=Array(this.numOfStickers).fill(this.layers===1)}pushAnimation(t,e,n){let o=e?-1:1,a=[0,0,0];a[t]=o,this.animationQueue.push({axis:a,stickers:n,stickersToAnimate:this.affectedStickers})}turn(t,e,n){this.resetAffectedStickers(),this.pushAnimation(t,n,[...this.stickers]),this._matchTurn(t,e,n)}sliceTurn(t,e){this.affectedStickers=Array(this.numOfStickers).fill(!1),this.pushAnimation(t,e,[...this.stickers]);for(let n=1;n<this.layers-1;n++)this._matchTurn(t,n,e)}wideTurn(t,e,n){this.resetAffectedStickers(),this.pushAnimation(t,n,[...this.stickers]),this._matchTurn(t,e,n);for(let o=1;o<this.layers-1;o++)this._matchTurn(t,o,n)}cubeRotate(t,e){this.resetAffectedStickers(),this.pushAnimation(t,e,[...this.stickers]);for(let n=0;n<this.layers;n++)this._matchTurn(t,n,e)}_matchTurn(t,e,n){t==0?(this._turnXAxis(e,n),e==0?this._turnOuter(5,n):e==this.layers-1&&this._turnOuter(4,!n)):t==1?(this._turnYAxis(e,n),e==0?this._turnOuter(0,n):e==this.layers-1&&this._turnOuter(2,!n)):t==2?(this._turnZAxis(e,n),e==0?this._turnOuter(1,n):e==this.layers-1&&this._turnOuter(3,!n)):console.error(`Axis ${t} not recognized`)}_turnXAxis(t,e){for(let n=1;n<=this.layers;n++)this._cycle(e,0*this.layersSq+this.layersSq-n-t*this.layers,3*this.layersSq+this.layersSq-n-t*this.layers,2*this.layersSq+this.layersSq-n-t*this.layers,1*this.layersSq+this.layersSq-n-t*this.layers)}_turnYAxis(t,e){for(let n=0;n<this.layers;n++)this._cycle(e,1*this.layersSq+n*this.layers+t,4*this.layersSq+n*this.layers+t,3*this.layersSq+(this.layers-n-1)*this.layers+(this.layers-1)-t,5*this.layersSq+n*this.layers+t)}_turnZAxis(t,e){for(let n=0;n<this.layers;n++)this._cycle(e,0*this.layersSq+(n+1)*this.layers-1-t,5*this.layersSq+n+this.layers*t,2*this.layersSq+(this.layers-n-1)*this.layers+t,4*this.layersSq+this.layersSq-(n+1)-t*this.layers)}_turnOuter(t,e){if(this.layers%2!=0){let n=this.center(t);this.affectedStickers[n]=!0}for(let n=0;n<Math.floor(this.layers/2);n++){let{topLeft:o,topRight:a,bottomLeft:l,bottomRight:s}=this.corners(t,n);this._cycle(e,o,a,s,l);let i=this.layers-2*(n+1);for(let c=0;c<i;c++){let{top:h,left:m,bottom:y,right:u}=this.edges(t,n,c);this._cycle(e,h,u,y,m)}}}_cycle(t,e,n,o,a){this.affectedStickers[e]=!0,this.affectedStickers[n]=!0,this.affectedStickers[o]=!0,this.affectedStickers[a]=!0,t?this._cycleHelper(e,n,o,a):this._cycleHelper(a,o,n,e)}_cycleHelper(t,e,n,o){let a=this.stickers[o];this.stickers[o]=this.stickers[n],this.stickers[n]=this.stickers[e],this.stickers[e]=this.stickers[t],this.stickers[t]=a}matchKeyToTurn(t){if(this.disableTurn||t.ctrlKey)return;switch(t.code){case"KeyN":return this.cubeRotate(0,!0),{notation:"x",rotate:!0};case"KeyB":return this.cubeRotate(0,!1),{notation:"x'",rotate:!0};case"Semicolon":return this.cubeRotate(1,!0),{notation:"y",rotate:!0};case"KeyA":return this.cubeRotate(1,!1),{notation:"y'",rotate:!0};case"KeyP":return this.cubeRotate(2,!0),{notation:"z",rotate:!0};case"KeyQ":return this.cubeRotate(2,!1),{notation:"z'",rotate:!0};case"KeyJ":return this.turn(1,0,!0),{notation:"U",turn:!0};case"KeyF":return this.turn(1,0,!1),{notation:"U'",turn:!0};case"KeyS":return this.turn(1,this.layers-1,!1),{notation:"D",turn:!0};case"KeyL":return this.turn(1,this.layers-1,!0),{notation:"D'",turn:!0};case"KeyH":return this.turn(2,0,!0),{notation:"F",turn:!0};case"KeyG":return this.turn(2,0,!1),{notation:"F'",turn:!0};case"KeyW":return this.turn(2,this.layers-1,!1),{notation:"B",turn:!0};case"KeyO":return this.turn(2,this.layers-1,!0),{notation:"B'",turn:!0};case"KeyD":return this.turn(0,this.layers-1,!1),{notation:"L",turn:!0};case"KeyE":return this.turn(0,this.layers-1,!0),{notation:"L'",turn:!0};case"KeyI":return this.turn(0,0,!0),{notation:"R",turn:!0};case"KeyK":return this.turn(0,0,!1),{notation:"R'",turn:!0};case"BracketLeft":return this.sliceTurn(0,!1),{notation:"M",turn:!0};case"Quote":return this.sliceTurn(0,!0),{notation:"M'",turn:!0};case"KeyC":return this.sliceTurn(1,!1),{notation:"E",turn:!0};case"Comma":return this.sliceTurn(1,!0),{notation:"E'",turn:!0};case"KeyY":return this.sliceTurn(2,!0),{notation:"S",turn:!0};case"KeyT":return this.sliceTurn(2,!1),{notation:"S'",turn:!0};case"KeyU":return this.wideTurn(0,0,!0),{notation:"r",turn:!0};case"KeyM":return this.wideTurn(0,0,!1),{notation:"r'",turn:!0};case"KeyV":return this.wideTurn(0,this.layers-1,!1),{notation:"l",turn:!0};case"KeyR":return this.wideTurn(0,this.layers-1,!0),{notation:"l'",turn:!0}}}stepAlgorithm(t,e){switch(t){case"x":this.cubeRotate(0,e);break;case"x'":this.cubeRotate(0,!e);break;case"x2":this.cubeRotate(0,e),this.cubeRotate(0,e);break;case"y":this.cubeRotate(1,e);break;case"y'":this.cubeRotate(1,!e);break;case"y2":this.cubeRotate(1,e),this.cubeRotate(1,e);break;case"z":this.cubeRotate(2,e);break;case"z'":this.cubeRotate(2,!e);break;case"z2":this.cubeRotate(2,e),this.cubeRotate(2,e);break;case"U":this.turn(1,0,e);break;case"U'":this.turn(1,0,!e);break;case"U2":case"U2'":this.turn(1,0,e),this.turn(1,0,e);break;case"D":this.turn(1,this.layers-1,!e);break;case"D'":this.turn(1,this.layers-1,e);break;case"D2":this.turn(1,this.layers-1,e),this.turn(1,this.layers-1,e);break;case"F":this.turn(2,0,e);break;case"F'":this.turn(2,0,!e);break;case"F2":this.turn(2,0,e),this.turn(2,0,e);break;case"B":this.turn(2,this.layers-1,!e);break;case"B'":this.turn(2,this.layers-1,e);break;case"B2":this.turn(2,this.layers-1,e),this.turn(2,this.layers-1,e);break;case"L":this.turn(0,this.layers-1,!e);break;case"L'":this.turn(0,this.layers-1,e);break;case"L2":this.turn(0,this.layers-1,e),this.turn(0,this.layers-1,e);break;case"l":this.wideTurn(0,this.layers-1,!e);break;case"l'":this.wideTurn(0,this.layers-1,e);break;case"R":this.turn(0,0,e);break;case"R'":this.turn(0,0,!e);break;case"R2":case"R2'":this.turn(0,0,e),this.turn(0,0,e);break;case"r":this.wideTurn(0,0,e);break;case"r'":this.wideTurn(0,0,!e);break;case"r2":case"r2'":this.wideTurn(0,0,e),this.wideTurn(0,0,e);break;case"M":this.turn(0,1,!e);break;case"M'":this.turn(0,1,e);break;case"M2":this.sliceTurn(0,e),this.sliceTurn(0,e);break;case"E":this.sliceTurn(1,!e);break;case"E'":this.sliceTurn(1,e);break;case"S":this.sliceTurn(2,e);break;case"S'":this.sliceTurn(2,!e);break;default:throw new Error("Invalid turn in algorithm: "+t)}}execAlg(t){if(!t)return;let e=t.split(" ");for(let n=0;n<e.length;n++)this.stepAlgorithm(e[n],!0);this.animationQueue=[]}execAlgReverse(t){if(!t)return;let e=t.split(" ");for(let n=e.length-1;n>=0;n--)this.stepAlgorithm(e[n],!1);this.animationQueue=[]}stickerIsOnFace(t,e){return e*this.layersSq<=t&&t<(e+1)*this.layersSq}center(t){return t*this.layersSq+Math.floor(this.layersSq/2)}corners(t,e){let n=t*this.layersSq;return{topLeft:n+(this.layers+1)*e,topRight:n+(this.layers-1)*(this.layers-e),bottomRight:n+(this.layers+1)*(this.layers-e-1),bottomLeft:n+(this.layers-1)*(e+1)}}edges(t,e,n){let o=this.corners(t,e),a=this.layers-2*(e+1);return{top:o.topLeft+this.layers*(n+1),left:o.topLeft+(a-n),right:o.topRight+n+1,bottom:o.bottomLeft+this.layers*(a-n)}}};function ze(r,t){return r/t*2-1}function We(r,t){return 1-r/t*2}function fe(r,t,e,n){return r<e?(n-t)/(e-r):(t-n)/(r-e)}function Y(r,t,e,n,o,a){return Math.abs(.5*(r*(n-a)+e*(a-t)+o*(t-n)))}function St(r,t){return r.layers-1-t%r.layers}function ye(r,t){return r.layers-1-Math.floor(t/r.layers)}function vt(r,t){return t%r.layers}function de(r,t){return r.layers-1-Math.floor((t-r.layersSq)/r.layers)}var se=class{onPointerDown(t,e,n,o,a){this.numOfPointerMoves=0;let l=ze(t,n.clientWidth),s=We(e,n.clientHeight);this.xOnDown=l,this.yOnDown=s,[this.stickerOnDown,this.cart2dOnDown]=this._coordinatesToSticker(l,s,o,a);function i(p,g,U){return{x:a[p].cart2d[g],y:a[p].cart2d[U]}}if(this.stickerOnDown!==-1)return;let c=i(0,0,1),h=i(o.layers*(o.layers-1),6,7),m=i(o.layers-1,2,3),y=i(o.layersSq-1,4,5),u=i(o.layers*(o.layers+1)-1,0,1),f=i(o.layersSq*2-1,2,3);s>c.y&&l>c.x&&l<h.x?o.cubeRotate(0,!0):l<c.x&&s>m.y&&s<c.y?o.cubeRotate(2,!1):l>h.x&&s>y.y&&s<h.y?o.cubeRotate(2,!0):l<u.x&&s>u.y&&s<m.y?o.cubeRotate(1,!0):l>f.x&&s>f.y&&s<y.y?o.cubeRotate(1,!1):s<u.y&&l>u.x&&l<f.x&&o.cubeRotate(0,!1)}onPointerMove(t,e){this.numOfPointerMoves++,this.xOnMove=t,this.yOnMove=e}onPointerUp(t,e,n){if(this.numOfPointerMoves<2)return;let o,a;if(this.stickerOnDown!==-1&&(o=fe(this.cart2dOnDown[0],this.cart2dOnDown[1],this.cart2dOnDown[4],this.cart2dOnDown[5]),a=fe(this.cart2dOnDown[2],this.cart2dOnDown[3],this.cart2dOnDown[6],this.cart2dOnDown[7]),o<0)){let m=o;o=a,a=m}let l=ze(this.xOnMove,t.clientWidth),s=We(this.yOnMove,t.clientHeight),i=fe(l,s,this.xOnDown,this.yOnDown),[c,h]=this._coordinatesToSticker(l,s,e,n);e.stickerIsOnFace(this.stickerOnDown,0)?l===this.xOnDown?e.turn(0,ye(e,this.stickerOnDown),s>this.yOnDown):i>o?e.turn(0,ye(e,this.stickerOnDown),l>this.xOnDown):i<a?e.turn(0,ye(e,this.stickerOnDown),l<this.xOnDown):e.turn(2,St(e,this.stickerOnDown),l>this.xOnDown):e.stickerIsOnFace(this.stickerOnDown,1)&&(l===this.xOnDown?e.turn(0,de(e,this.stickerOnDown),s>this.yOnDown):i>o?e.turn(0,de(e,this.stickerOnDown),l>this.xOnDown):i<a?e.turn(0,de(e,this.stickerOnDown),l<this.xOnDown):e.turn(1,vt(e,this.stickerOnDown),l<this.xOnDown))}_coordinatesToSticker(t,e,n,o){let a=l=>{if(!o[l].cart2d)return;let s=o[l].cart2d,i=Y(s[0],s[1],s[2],s[3],s[4],s[5])+Y(s[0],s[1],s[4],s[5],s[6],s[7]),c=Y(t,e,s[0],s[1],s[2],s[3])+Y(t,e,s[2],s[3],s[4],s[5])+Y(t,e,s[4],s[5],s[6],s[7])+Y(t,e,s[6],s[7],s[0],s[1]),h=1e-5;if(Math.abs(i-c)<h)return[l,s]};for(let l=0;l<2*n.layersSq;l++){let s=a(l);if(s)return s}for(let l=4*n.layersSq;l<5*n.layersSq;l++){let s=a(l);if(s)return s}return[-1,void 0]}};function X(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ke(r,t,e,n,o){let a=1/Math.tan(t/2);if(r[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,o!=null&&o!==1/0){let l=1/(n-o);r[10]=(o+n)*l,r[14]=2*o*n*l}else r[10]=-1,r[14]=-2*n;return r}function J(r,t,e,n){let o=n[0],a=n[1],l=n[2],s=1/Math.hypot(o,a,l);o*=s,a*=s,l*=s;let i=Math.sin(e),c=Math.cos(e),h=1-c,m=t[0],y=t[1],u=t[2],f=t[3],p=t[4],g=t[5],U=t[6],L=t[7],b=t[8],R=t[9],S=t[10],j=t[11],A=o*o*h+c,T=a*o*h+l*i,w=l*o*h-a*i,B=o*a*h-l*i,E=a*a*h+c,O=l*a*h+o*i,x=o*l*h+a*i,M=a*l*h-o*i,P=l*l*h+c;return r[0]=m*A+p*T+b*w,r[1]=y*A+g*T+R*w,r[2]=u*A+U*T+S*w,r[3]=f*A+L*T+j*w,r[4]=m*B+p*E+b*O,r[5]=y*B+g*E+R*O,r[6]=u*B+U*E+S*O,r[7]=f*B+L*E+j*O,r[8]=m*x+p*M+b*P,r[9]=y*x+g*M+R*P,r[10]=u*x+U*M+S*P,r[11]=f*x+L*M+j*P,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}function je(r,t){let e=t[0],n=t[1],o=t[2];return r[12]+=r[0]*e+r[4]*n+r[7]*o,r[13]+=r[1]*e+r[5]*n+r[8]*o,r[14]+=r[2]*e+r[5]*n+r[9]*o,r[15]+=r[3]*e+r[6]*n+r[10]*o,r}function pe(){let r;return t=>(r||(r=t()),r)}var k=document.querySelector("canvas"),d=k.getContext("webgl"),W=Mt(),$=[],Z={animateTurns:!0,hintStickers:!0,showBody:!0};var Ge=Date.now()*.001;var Ne=!1;function $e(){Ne||(Ne=!0,requestAnimationFrame(Ve))}function Qe(r){let t=document.querySelector(r),e=new oe,n=new ne,o=Ft(t),a=new se;e.setNumOfLayers(3),e.new();let l=Ce(d,e,o),s={div:t,cube:e,spring:n,buffers:l,perspectiveMatrix:o},i=(f,p)=>{!s.dragEnabled||a.onPointerDown(f,p,t,e,l)},c=(f,p)=>{!s.dragEnabled||a.onPointerMove(f,p)},h=()=>{!s.dragEnabled||a.onPointerUp(t,e,l)},m=f=>{let p=f.target.getBoundingClientRect(),g=f.touches[0].pageX-p.left,U=f.touches[0].pageY-p.top;return{x:g,y:U}},y=()=>{t.addEventListener("pointerdown",f=>i(f.offsetX,f.offsetY)),t.addEventListener("pointermove",f=>c(f.offsetX,f.offsetY)),t.addEventListener("pointerup",f=>h())},u=()=>{t.addEventListener("touchstart",f=>{let{x:p,y:g}=m(f);i(p,g)}),t.addEventListener("touchmove",f=>{let{x:p,y:g}=m(f);c(p,g)}),t.addEventListener("touchend",f=>{h()})};return window.PointerEvent?y():u(),s}function Mt(){let e=At(d,`
    attribute vec4 aVertexPosition;
    attribute vec4 aVertexColor;
    uniform mat4 uTransformMatrix;
    uniform mat4 uRotateMatrix;

    // variables shared between vertex and fragment shaders
    varying lowp vec4 vColor;
    varying lowp vec4 originalPos;
    varying lowp vec4 rotatedPos;
    void main(void) {
        gl_Position = uTransformMatrix * aVertexPosition;
        originalPos = aVertexPosition;
        rotatedPos = uRotateMatrix * aVertexPosition;
        vColor = aVertexColor;
    }
    `,`
    // variables shared between vertex and fragment shaders
    varying lowp vec4 vColor;
    varying lowp vec4 originalPos;
    varying lowp vec4 rotatedPos;

    void main(void) {
        gl_FragColor = vColor;

        // low precision float variable
        lowp float max = 1.05;

        // if it is a normal sticker rather than a hint sticker, it should not be discarded
        if (originalPos.x < max && originalPos.x > -max && originalPos.y < max && originalPos.y > -max && originalPos.z < max && originalPos.z > -max) {
            return;
        }

        // if it starts on the right or left, and stays on its side, it should not be discarded
        if (originalPos.x > max && rotatedPos.x > max) return;
        if (originalPos.x < -max && rotatedPos.x < -max) return;

        if (rotatedPos.y < max && rotatedPos.z < max) return;
        discard;
    }
    `);return d.useProgram(e),{attribLocations:{vertexPosition:d.getAttribLocation(e,"aVertexPosition"),vertexColor:d.getAttribLocation(e,"aVertexColor")},uniformLocations:{transformMatrix:d.getUniformLocation(e,"uTransformMatrix"),rotateMatrix:d.getUniformLocation(e,"uRotateMatrix")}}}function Ft(r){let t=X();return Ke(t,50*Math.PI/180,r.clientWidth/r.clientHeight,.1,100),je(t,[0,0,-5]),J(t,t,45*Math.PI/180,[1,0,0]),J(t,t,0,[0,-1,0]),t}function Re(r,t,e){e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(t.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.attribLocations.vertexPosition)}function Ue(r,t,e){e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(t.attribLocations.vertexColor,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.attribLocations.vertexColor)}function ge(r){r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}function At(r,t,e){let n=Ye(r,r.VERTEX_SHADER,t),o=Ye(r,r.FRAGMENT_SHADER,e),a=r.createProgram();return r.attachShader(a,n),r.attachShader(a,o),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+r.getProgramInfoLog(a)),null)}function Ye(r,t,e){let n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?n:(alert("An error occurred compiling the shaders: "+r.getShaderInfoLog(n)),r.deleteShader(n),null)}function Tt(){let r=k.clientWidth,t=k.clientHeight,e=k.width!==r||k.height!==t;return e&&(k.width=r,k.height=t),e}function Ve(r){r*=.001;let t=r-Ge;Ge=r,Tt(),d.enable(d.DEPTH_TEST),d.enable(d.SCISSOR_TEST),d.depthFunc(d.LEQUAL),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT),k.style.transform=`translateY(${window.scrollY}px)`;for(let e=0;e<$.length;e++){let{cube:n,div:o,spring:a,buffers:l,perspectiveMatrix:s}=$[e],i=o.getBoundingClientRect();if(i.bottom<0||i.top>k.clientHeight||i.right<0||i.left>k.clientWidth)continue;let c=i.right-i.left,h=i.bottom-i.top,m=i.left,y=k.clientHeight-i.bottom;d.viewport(m,y,c,h),d.scissor(m,y,c,h),n.animationQueue[0]&&(a.target=n.animationQueue.length*90,a.update(t),a.position>=90&&(n.affectedStickers=Array(n.numOfStickers).fill(!1),a.position=0,n.animationQueue.shift()));let u=n.animationQueue[0],f=wt(n),p=pe(),g=pe();for(let U=0;U<n.numOfStickers;U++){let L=l[U],b=u&&u.stickersToAnimate[U]&&Z.animateTurns?p(()=>J(X(),s,a.position*Math.PI/180,u.axis)):s;d.uniformMatrix4fv(W.uniformLocations.transformMatrix,!1,b);let R=u&&u.stickersToAnimate[U]&&Z.animateTurns?g(()=>{let S=X();return J(S,S,a.position*Math.PI/180,u.axis)}):X();d.uniformMatrix4fv(W.uniformLocations.rotateMatrix,!1,R),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,L.indexBuffer),Z.showBody&&(Re(L.noGapPositionBuffer,W,d),Ue(n.underStickers[U].buffer,W,d),ge(d)),Re(L.positionBuffer,W,d),Ue(f[U].buffer,W,d),ge(d),Z.hintStickers&&(Re(L.hintPositionBuffer,W,d),Ue(f[U].buffer,W,d),ge(d))}}requestAnimationFrame(Ve)}function wt(r){return Z.animateTurns&&r.animationQueue[0]?r.animationQueue[0].stickers:r.stickers}function Xe(){let r=document.querySelector(".slideRight"),t=!1;function e(n){if(t=n,t){r.classList.add("slideRightOpen");return}r.classList.remove("slideRightOpen")}document.addEventListener("click",n=>{let o=n.target;if(o===document.querySelector("#menu")){e(!0);return}t&&!o.closest(".slideRight")&&e(!1)}),document.querySelector("#closeMenu").addEventListener("click",()=>{e(!1)}),document.querySelector("#learnButton").addEventListener("click",()=>{document.location.href="learn.html"}),document.querySelector("#playButton").addEventListener("click",()=>{document.location.href="play.html"}),document.querySelector("#trainButton").addEventListener("click",()=>{document.location.href="train.html"}),document.querySelector("#cubleButton").addEventListener("click",()=>{document.location.href="cuble.html"})}var xe=!1;function be(r){xe=!0,r.style.display="flex",r.classList.add("slideLeftOpen"),document.documentElement.clientWidth<725?r.classList.add("slideLeftClosed"):r.classList.remove("slideLeftClosed")}function ie(r){xe=!1,document.documentElement.clientWidth<725?(r.classList.add("slideLeftClosed"),r.classList.remove("slideLeftOpen"),r.style.display="flex"):r.style.display="none"}function Je(r){xe?ie(r):be(r)}var Se=[4,13,22,31,40,49],Et=[0,29,36],Ot=[6,35,51],Pt=[2,9,42],Ct=[8,15,45],It=[18,11,44],Dt=[24,47,17],_t=[20,38,27],qt=[26,33,53],Ht=[3,32],zt=[1,39],Wt=[7,48],Kt=[5,12],jt=[10,43],Gt=[16,46],Nt=[21,14],Yt=[19,41],$t=[25,50],Qt=[23,30],Vt=[28,37],Xt=[34,52],ve=[...Et,...Ot,...Pt,...Ct],ke=[...It,...Dt,..._t,...qt],Le=[...Ht,...zt,...Wt,...Kt],Me=[...jt,...Gt,...Vt,...Xt],Fe=[...Nt,...Yt,...$t,...Qt],ae=[...Se,...Le],le=[...ae,...ve],F=[...le,...Me],Ae=[19,21,23,25],ee=[18,19,20,21,22,23,24,25,26],Te=[11,17,27,33,38,44,47,53],Jt=[...Fe,...ke],we=[...F,...Jt];function ce(r){return(r||"").split(" ")}var K=[{activeStickers:Se,setup:"",algorithm:"x x x x y y y y"},{activeStickers:[...ve,...ke],setup:"",algorithm:"x x x x y y y y"},{activeStickers:[...Le,...Me,...Fe],setup:"",algorithm:"x x x x y y y y"},{activeStickers:ae,setup:"",algorithm:"y y y y"},{activeStickers:ae,practiceProblems:[{setup:"F F D",algorithm:"D' F F",directions:"Solve the white-green edge",explanation:"To solve the white-green, line up the green, then line up the white."},{setup:"y U2 R' U2",algorithm:"U U R U U",directions:"Solve the white-green edge",explanation:"To insert the white green, move the top layer, move the white-green up, then fix the top layer."},{setup:"F' R' F",algorithm:"y D F' U' R U",directions:"Solve the white-red edge",explanation:"First we'll rotate the cube so red is in the front. Then we'll bring the white-red around to insert it."},{setup:"y' U R U' B'",algorithm:"y y F' U' R U",directions:"Solve the white-red edge",explanation:"The white-red is in the back, so first we'll rotate the cube. Then, move the white-red to the side and insert it."},{setup:"y U F' U'",algorithm:"y' U R U'",directions:"Solve the white-blue edge",explanation:"The white-blue is on the left, so first we'll rotate the cube. Then, insert it."},{setup:"y' L2 D2",algorithm:"D' D' L' L'",directions:"Solve the white-blue edge",explanation:"The white-blue is on the bottom right. To solve it, line up the blue, then line up the white."},{setup:"y2 R' U' R U",algorithm:"F F D R R",directions:"Solve the white-orange edge",explanation:"The white-orange is in another edge's position, so first, we'll take it out. Then line up the orange, then line up the white."},{setup:"L",algorithm:"L'",directions:"Solve the white-orange edge",explanation:"This is one of the easiest cases. The white-orange is only one move away."}]},{activeStickers:le,setup:"",algorithm:"y y y y"},{activeStickers:le,practiceProblems:[{setup:"z2 R U' R'",algorithm:"R U R'",directions:"Solve the white-green-orange corner",explanation:"Move corner up, move corner to the side, move back down"},{setup:"z2 y R U' R' U R U' R' U",algorithm:"R U R' U' R U R'",directions:"Solve the white-orange-blue corner",explanation:"Move corner up, move corner to the side, move back down. Repeat 1x"},{setup:"z2 y2 R U' R' U R U' R' U R U' R'",algorithm:"R U R' U' R U R' U' R U R'",directions:"Solve the white-blue-red corner",explanation:"Move corner up, move corner to the side, move back down. Repeat 3x"},{setup:"z2 y' R U' R' U R U' R' U R U' R' U R U' R'",algorithm:"R U R' U' R U R' U' R U R' U' R U R'",directions:"Solve the white-red-green corner",explanation:"Move corner up, move corner to the side, move back down. Repeat 4x"},{setup:"z2 R U' R' U R U' R' U R U' R' U R U' R' U R U' R'",algorithm:"R U R' U' R U R' U' R U R' U' R U R' U' R U R'",directions:"Solve the white-green-orange corner",explanation:"Move corner up, move corner to the side, move back down. Repeat 5x"}]},{activeStickers:F,setup:"z2",algorithm:"y y y y"},{activeStickers:F,practiceProblems:[{setup:"z2 F' U' F U R U R' U'",algorithm:"U R U' R' U' F' U F",directions:"Solve the green-orange edge",explanation:"Pair up the green-orange edge with the white-green-orange corner. Then insert the pair into the slot."},{setup:"z2 y F' U' F U R U R' U",algorithm:"U' R U' R' U' F' U F",directions:"Solve the orange-blue edge",explanation:"Pair up the orange-blue edge with the white-orange-blue corner. Then insert the pair into the slot."},{setup:"z2 y2 F' U' F U R U R' U2",algorithm:"U U R U' R' U' F' U F",directions:"Solve the blue-red edge",explanation:"Pair up the blue-red edge with the white-blue-red corner. Then insert the pair into the slot."},{setup:"z2 y' F' U' F U R U R'",algorithm:"R U' R' U' F' U F",directions:"Solve the red-green edge",explanation:"Pair up the red-green edge with the white-red-green corner. Then insert the pair into the slot."}]},{activeStickers:[...F,...Ae],setup:"z2",algorithm:"y y y y"},{activeStickers:[...F,...Ae],practiceProblems:[{setup:"z2 F U R U' R' F'",algorithm:"F R U R' U' F'",directions:"Solve the yellow cross",explanation:"When you have a horizontal bar, move the front layer, do some in-between moves, then fix the front layer."},{setup:"z2 y F U R U' R' F' U",algorithm:"U F R U R' U' F'",directions:"Solve the yellow cross",explanation:"Make the bar horizontal. Then move the front layer, do some in-between moves, then fix the front layer."},{setup:"z2 y F R U R' U' F' U'",algorithm:"U F U R U' R' F'",directions:"Solve the yellow cross",explanation:"Move the L-shape to the top left. Then move the front layer, do some in-between moves, then fix the front layer."},{setup:"z2 y' F R U R' U' F' U2",algorithm:"U U F U R U' R' F'",directions:"Solve the yellow cross",explanation:"Move the L-shape to the top left. Then move the front layer, do some in-between moves, then fix the front layer."},{setup:"z2 F U R U' R' F' U F R U R' U' F'",algorithm:"F U R U' R' F' U F R U R' U' F'",directions:"Solve the yellow cross",explanation:"When you have the dot case, you combine the algorithms for the L-shape and horizontal bar cases."},{setup:"z2 y2 F U R U' R' F' U F R U R' U' F'",algorithm:"F U R U' R' F' U F R U R' U' F'",directions:"Solve the yellow cross",explanation:"When you have the dot case, you combine the algorithms for the L-shape and horizontal bar cases."}]},{activeStickers:[...F,...ee],setup:"z2 R U2 R' U' R U' R'",algorithm:"R U R' U R U U R'"},{activeStickers:[...F,...ee],practiceProblems:[{setup:"z2 R U2 R' U' R U' R'",algorithm:"R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"If you have 1 yellow on top, bring the yellow to the front left, then do the Sune."},{setup:"z2 y R U R' U R U2 R' U'",algorithm:"U' R U R' U R U U R' U U R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"If you have 1 yellow on top, bring the yellow to the front left, then do the Sune. In this case, you have to do the Sune twice."},{setup:"z2 y2 R U2 R' U' R U R' U' R U' R'",algorithm:"R U R' U R U U R' R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"In this case, there are no yellows on top, and it kind of looks like an H. Do the Sune twice."},{setup:"z2 y' L F R' F' L' F R F' U2",algorithm:"R U R' U R U U R' R U R' U R U U R' R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"In this case, there are 2 yellows diagonal from each other. Do the Sune 3x."},{setup:"z2 F R' F' L F R F' L'",algorithm:"R U R' U R U U R' U R U R' U R U U R' U U R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"In this case, there are two yellows on top and the other yellows are facing opposite directions. This requires doing Sune 3x."},{setup:"z2 y R U2 R D R' U2 R D' R2",algorithm:"R U R' U R U U R' U' R U R' U R U U R' U U R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"In this case, there are two yellows on top and the other yellows are facing the same direction. This requires doing Sune 3x."},{setup:"z2 y2 R U2 R2 U' R2 U' R2 U2 R",algorithm:"R U R' U R U U R' U' R U R' U R U U R'",directions:"Solve the yellow corners",explanation:"In this case, there are no yellows on top. This requires doing Sune 2x."}]},{activeStickers:[...F,...ee,...Te],setup:"z2 R2 B2 R F R' B2 R F' R",algorithm:"R' F R' B' B' R F' R' B' B' R R"},{activeStickers:[...F,...ee,...Te],practiceProblems:[{setup:"z2 U2 R2 B2 R F R' B2 R F' R U",algorithm:"U' R' F R' B' B' R F' R' B' B' R R U U",directions:"Solve the corners",explanation:"Move the matching corners to the back, use the last layer corners algorithm, then adjust the top layer."},{setup:"z2 y U' R2 B2 R F R' B2 R F' R U2",algorithm:"U U R' F R' B' B' R F' R' B' B' R R U",directions:"Solve the corners",explanation:"Move the matching corners to the back, use the last layer corners algorithm, then adjust the top layer."},{setup:"z2 y2 F R U' R' U' R U R' F' R U R' U' R' F R F'",algorithm:"R' F R' B' B' R F' R' B' B' R R U R' F R' B' B' R F' R' B' B' R R U U",directions:"Solve the corners",explanation:"In this case, there are no matching corners on any side. Use the last layer corners algorithm twice."},{setup:"z2 y' F R U' R' U' R U R' F' R U R' U' R' F R F' U'",algorithm:"R' F R' B' B' R F' R' B' B' R R U R' F R' B' B' R F' R' B' B' R R U",directions:"Solve the corners",explanation:"In this case, there are no matching corners on any side. Use the last layer corners algorithm twice."}]},{activeStickers:we,setup:"z2 M' M' U' M U U M' U' M' M'",algorithm:"M' M' U M U U M' U M' M'"},{activeStickers:we,practiceProblems:[{setup:"z2 U2 M' M' U' M U U M' U' M' M' U",algorithm:"U' M' M' U M U U M' U M' M' U U",directions:"Solve the cube",explanation:"Move the matching colors to back, use the last layer edges algorithm, then adjust the top layer."},{setup:"z2 y U' M' M' U M U U M' U M' M' U2",algorithm:"U U M' M' U M U U M' U M' M' M' M' U M U U M' U M' M' U",directions:"Solve the cube",explanation:"You have to use the algorithm twice for this case."},{setup:"z2 y2 M2 U' M2 U2 M2 U' M2 U'",algorithm:"M' M' U M U U M' U M' M' U M' M' U M U U M' U M' M'",directions:"Solve the cube",explanation:"You have to use the algorithm twice for this case."},{setup:"z2 y' M2 U' M2 U' M' U2 M2 U2 M' U",algorithm:"M' M' U M U U M' U M' M' U' M' M' U M U U M' U M' M' U U",directions:"Solve the cube",explanation:"You have to use the algorithm twice for this case."}]}];function er(){Xe();function r(l){let s=Qe(`#scene${l}`);$.push(s);let i=K[l];if(i.cube=s.cube,i.move=0,i.practiceProblems)s.dragEnabled=!0,Ze(i);else{let c=tt(i);s.cube.setColors(c),s.cube.execAlg(i.setup)}}let t=document.querySelector("#lessonNavigator");t.addEventListener("click",l=>{let s=l.target;if(s.className==="lesson-p"){let i=parseInt(s.getAttribute("lesson-index"));r(i),document.documentElement.clientWidth<725&&ie(t)}});for(let l=0;l<K.length;l++)r(l);te(),$e();let e="leftButton",n="rightButton",o="showSolution",a="next";document.addEventListener("click",l=>{let s=l.target;if(s.id.startsWith(e)){let i=parseInt(s.id.substring(e.length)),c=K[i];if(c.move<=0)return;c.move--;let h=ce(c.algorithm);c.cube.stepAlgorithm(h[c.move],!1),te()}else if(s.id.startsWith(n)){let i=parseInt(s.id.substring(n.length)),c=K[i],h=ce(c.algorithm);if(c.move>=h.length)return;c.cube.stepAlgorithm(h[c.move],!0),c.move++,te()}else if(s.id.startsWith(o)){let i=parseInt(s.id.substring(o.length)),c=K[i];c.showSolution=!0,$[i].dragEnabled=!1,rt(c,c.problemIndex),te()}else if(s.id.startsWith(a)){let i=parseInt(s.id.substring(a.length)),c=K[i];c.showSolution=!1,$[i].dragEnabled=!0,Ze(c),te()}}),document.querySelector("#openClose").addEventListener("click",l=>{Je(t)}),nt()}function tt(r){let t=Array(54);r.activeStickers.forEach(e=>{t[e]=Q(V(e,r.cube))});for(let e=0;e<54;e++)t[e]||(t[e]=Ee);return t}function te(){for(let r=0;r<K.length;r++){let t=K[r];if(t.practiceProblems&&t.showSolution){let o=t.practiceProblems[t.problemIndex];document.querySelector(`#problemText${r}`).textContent=o.explanation,document.querySelector(`#leftButton${r}`).style.display="",document.querySelector(`#rightButton${r}`).style.display="";let a=document.querySelector(`#moveCounter${r}`);a.style.display="";let l=ce(t.algorithm);a.textContent=`${t.move} / ${l.length}`;continue}if(t.practiceProblems&&!t.showSolution){let o=t.practiceProblems[t.problemIndex];document.querySelector(`#problemText${r}`).textContent=o.directions,document.querySelector(`#leftButton${r}`).style.display="none",document.querySelector(`#rightButton${r}`).style.display="none",document.querySelector(`#moveCounter${r}`).style.display="none";continue}let e=document.querySelector(`#moveCounter${r}`),n=ce(t.algorithm);e.textContent=`${t.move} / ${n.length}`}}function Ze(r){let t=C(r.practiceProblems.length);rt(r,t)}function rt(r,t){let e=r.practiceProblems[t];r.problemIndex=t,r.algorithm=r.practiceProblems[t].algorithm;let n=tt(r);r.cube.setColors(n),r.cube.execAlg(e.setup),r.move=0}window.addEventListener("resize",()=>{nt()});function nt(){let r=document.querySelector("#openClose"),t=document.querySelector("#lessonNavigator");if(document.documentElement.clientWidth<725){r.style.display="inline-block",ie(t);return}r.style.display="none",be(t)}er();})();
//# sourceMappingURL=learn.js.map
